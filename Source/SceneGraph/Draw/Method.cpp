
///////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2009, Perry L Miller IV
//  All rights reserved.
//  BSD License: http://www.opensource.org/licenses/bsd-license.html
//
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//
//  The draw method base class.
//
///////////////////////////////////////////////////////////////////////////////

#include "SceneGraph/Draw/Method.h"

#include "Usul/Functions/NoThrow.h"

using namespace SceneGraph::Draw;


///////////////////////////////////////////////////////////////////////////////
//
//  Constructor.
//
///////////////////////////////////////////////////////////////////////////////

Method::Method() : BaseClass(),
  _navigation ( Matrix::getIdentity() ),
  _projection ( Matrix::getIdentity() ),
  _viewport ( Viewport ( 0, 0, 100, 100 ) ),
  _drawLists()
{
}


///////////////////////////////////////////////////////////////////////////////
//
//  Destructor.
//
///////////////////////////////////////////////////////////////////////////////

Method::~Method()
{
  USUL_TRY_BLOCK
  {
    _drawLists = DrawLists::RefPtr();
  }
  USUL_DEFINE_CATCH_BLOCKS ( "1789057860" );
}


///////////////////////////////////////////////////////////////////////////////
//
//  Clear this visitor.
//
///////////////////////////////////////////////////////////////////////////////

void Method::reset()
{
  // Reset members.
  _navigation = Matrix::getIdentity();
  _projection = Matrix::getIdentity();

  // Redirect to base class.
  BaseClass::reset();
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the draw-lists.
//
///////////////////////////////////////////////////////////////////////////////

void Method::drawListsSet ( DrawLists::RefPtr dl )
{
  _drawLists = dl;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Draw the elements. Intended to be overloaded.
//
///////////////////////////////////////////////////////////////////////////////

void Method::draw()
{
}


///////////////////////////////////////////////////////////////////////////////
//
//  Get the draw-lists.
//
///////////////////////////////////////////////////////////////////////////////

Method::DrawLists::RefPtr Method::_drawListsGet()
{
  return _drawLists;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the navigation matrix.
//
///////////////////////////////////////////////////////////////////////////////

void Method::navigationMatrixSet ( const Matrix &m )
{
  _navigation = m;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the navigation matrix.
//
///////////////////////////////////////////////////////////////////////////////

Method::Matrix Method::navigationMatrixGet() const
{
  return _navigation;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the projection matrix.
//
///////////////////////////////////////////////////////////////////////////////

void Method::projectionMatrixSet ( const Matrix &m )
{
  _projection = m;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the projection matrix.
//
///////////////////////////////////////////////////////////////////////////////

Method::Matrix Method::projectionMatrixGet() const
{
  return _projection;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the viewport.
//
///////////////////////////////////////////////////////////////////////////////

void Method::viewportSet ( const Viewport &vp )
{
  _viewport = vp;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the viewport.
//
///////////////////////////////////////////////////////////////////////////////

Method::Viewport Method::viewportGet() const
{
  return _viewport;
}
